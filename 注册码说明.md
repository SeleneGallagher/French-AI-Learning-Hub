# 注册码说明

## 🎯 什么是注册码？

**注册码**是一个**邀请制注册机制**，只有输入正确注册码的人才能注册账号。

### 工作原理

```
用户想注册
  ↓
输入：用户名 + 密码 + 注册码
  ↓
后端验证注册码是否存在且未使用
  ↓
验证通过 → 创建账号
  - 单次使用：标记注册码为已使用
  - 无限使用：不标记，可以继续使用
验证失败 → 拒绝注册
```

---

## 💡 为什么需要注册码？

1. **控制用户数量** - 只有你给注册码的人才能注册
2. **防止随意注册** - 避免陌生人随意注册账号
3. **管理用户** - 你知道谁注册了（通过注册码）

---

## 🔧 注册码类型

### 类型1：单次使用（默认）

- ✅ 每个注册码只能用一次
- ✅ 注册后自动标记为已使用
- ✅ 适合：给特定的人

**设置方式**：
```sql
INSERT INTO registration_codes (code, unlimited_use) VALUES 
    ('SINGLE_USE_CODE', FALSE);
```

### 类型2：无限使用 ⭐

- ✅ 同一个注册码可以给多人使用
- ✅ 注册后不标记为已使用
- ✅ 适合：公开注册码，让所有人都用同一个

**设置方式**：
```sql
INSERT INTO registration_codes (code, unlimited_use) VALUES 
    ('PUBLIC_CODE', TRUE);  -- 设置为TRUE表示可无限使用
```

---

## 📋 使用示例

### 示例1：单次使用的注册码

```sql
-- 给朋友A的注册码（只能用一次）
INSERT INTO registration_codes (code, unlimited_use) VALUES 
    ('FRIEND_A_CODE', FALSE);

-- 朋友A注册后，这个注册码就不能再用了
```

### 示例2：无限使用的注册码（推荐）⭐

```sql
-- 公开注册码（所有人都可以用）
INSERT INTO registration_codes (code, unlimited_use) VALUES 
    ('FRENCH2024', TRUE);  -- 设置为TRUE

-- 所有人都可以用 'FRENCH2024' 这个注册码注册
-- 注册后不会标记为已使用，可以继续用
```

### 示例3：混合使用

```sql
-- 同时设置两种类型
INSERT INTO registration_codes (code, unlimited_use) VALUES 
    ('PUBLIC_CODE', TRUE),      -- 公开的，无限使用
    ('VIP_CODE_001', FALSE),    -- VIP的，单次使用
    ('VIP_CODE_002', FALSE);    -- VIP的，单次使用
```

---

## 🎯 推荐设置

### 如果你想要一个公开的注册码（所有人都能用）

```sql
-- 插入一个无限使用的注册码
INSERT INTO registration_codes (code, unlimited_use) VALUES 
    ('FRENCH2024', TRUE);
```

**效果**：
- ✅ 所有人都可以用 `FRENCH2024` 注册
- ✅ 注册后注册码仍然可用
- ✅ 可以无限次使用

---

## 📊 查看注册码使用情况

```sql
-- 查看所有注册码
SELECT code, unlimited_use, used_at, used_by_user_id 
FROM registration_codes;

-- 查看无限使用的注册码
SELECT code FROM registration_codes WHERE unlimited_use = TRUE;

-- 查看已使用的单次注册码
SELECT code, used_at, used_by_user_id 
FROM registration_codes 
WHERE unlimited_use = FALSE AND used_at IS NOT NULL;
```

---

## ⚠️ 重要提醒

1. **无限使用的注册码** - 设置 `unlimited_use = TRUE`
2. **单次使用的注册码** - 设置 `unlimited_use = FALSE`（默认）
3. **注册码要保密** - 无限使用的注册码也要控制分发
4. **可以随时添加新注册码** - 需要时再插入
5. **可以禁用注册码** - 设置 `is_active = FALSE`

---

## ✅ 总结

### 单次使用（默认）
- 每个注册码只能用一次
- 适合给特定的人

### 无限使用 ⭐（推荐）
- 同一个注册码可以给多人使用
- 适合公开注册码
- **设置 `unlimited_use = TRUE` 即可**

**你想要无限使用的注册码，设置 `unlimited_use = TRUE` 就可以了！** 🎯
