# 📁 项目结构说明

## 🗂️ 目录结构

```
AI_LL/
├── api/                      # 后端 API 模块
│   ├── ai/                  # AI 相关 API
│   │   ├── coze.py         # Coze AI 助手
│   │   └── deepseek.py     # DeepSeek API
│   ├── auth/                # 认证相关 API
│   │   ├── login.py        # 用户登录
│   │   └── register.py    # 用户注册
│   ├── dictionary/          # 词典相关 API
│   │   └── history.py      # 词典查询历史
│   ├── movies/              # 电影相关 API
│   │   └── list.py         # 电影列表
│   ├── news/                # 新闻相关 API
│   │   └── list.py         # 新闻列表
│   └── config.py           # 配置 API
│
├── database/                # 数据库相关
│   └── init.sql            # 数据库初始化脚本
│
├── docs/                    # 文档目录
│   ├── PostgreSQL设置指南.md
│   ├── Railway部署指南.md
│   ├── 部署方案.md
│   ├── 环境变量清单.md
│   └── 项目结构说明.md
│
├── lib/                     # 共享库
│   └── utils.py            # 工具函数（数据库连接、JWT 等）
│
├── public/                  # 静态资源
│   ├── data/               # 数据文件
│   │   ├── dicts/         # 词典 JSON 文件
│   │   ├── movies.json    # 电影数据
│   │   └── news.json      # 新闻数据
│   └── favicon.ico        # 网站图标
│
├── scripts/                 # 前端脚本
│   ├── modules/           # 功能模块
│   │   ├── about.js     # 关于页面
│   │   ├── aiAssistant.js # AI 助手
│   │   ├── dictionary.js  # 词典模块
│   │   ├── expressions.js # 语用模块
│   │   ├── login.js       # 登录模块
│   │   ├── movies.js      # 电影模块
│   │   └── news.js        # 新闻模块
│   ├── services/          # 服务层
│   │   ├── api.js        # Coze API 服务
│   │   ├── apiService.js # 统一 API 服务
│   │   ├── auth.js       # 认证服务
│   │   ├── configService.js # 配置服务
│   │   ├── deepseekService.js # DeepSeek 服务
│   │   ├── favoritesStorage.js # 收藏存储
│   │   ├── newsService.js # 新闻服务
│   │   ├── storage.js    # 存储服务
│   │   └── translationService.js # 翻译服务
│   ├── server/           # 服务器端脚本
│   │   └── update_data.py # 数据更新脚本
│   ├── tools/            # 工具脚本
│   │   ├── import_french_dict.py # 词典导入
│   │   └── txt2dict.py   # TXT 转词典
│   ├── utils/            # 工具函数
│   │   ├── confirmDialog.js # 确认对话框
│   │   └── helpers.js    # 辅助函数
│   └── app.js            # 主应用入口
│
├── styles/                # 样式文件
│   └── main.css          # 主样式
│
├── app.py                 # Flask 应用主文件
├── index.html            # 主页面
│
├── requirements.txt      # Python 依赖（开发）
├── requirements_server.txt # Python 依赖（生产）
├── Procfile              # Railway 启动配置
├── runtime.txt           # Python 版本
├── railway.json          # Railway 配置
├── Dockerfile            # Docker 配置
├── env.example           # 环境变量示例
│
└── README.md             # 项目说明
```

---

## 📝 文件说明

### 核心文件

- **`app.py`** - Flask 应用主文件，定义所有路由
- **`index.html`** - 前端主页面
- **`lib/utils.py`** - 共享工具函数（数据库连接、JWT 验证等）

### 后端 API

- **`api/auth/`** - 用户认证（登录/注册）
- **`api/ai/`** - AI 服务（Coze、DeepSeek）
- **`api/dictionary/`** - 词典相关 API
- **`api/movies/`** - 电影数据 API
- **`api/news/`** - 新闻数据 API
- **`api/config.py`** - 配置信息 API

### 数据库

- **`database/init.sql`** - 数据库初始化脚本
  - 创建用户表
  - 创建注册码表
  - 创建词典历史表
  - 创建索引

### 前端模块

- **`scripts/modules/`** - 各功能模块
- **`scripts/services/`** - 服务层（API 调用、存储等）
- **`scripts/utils/`** - 工具函数

### 配置文件

- **`requirements_server.txt`** - 生产环境依赖
- **`Procfile`** - Railway 启动命令
- **`railway.json`** - Railway 项目配置
- **`env.example`** - 环境变量示例

---

## 🔧 代码规范

### Python 代码

- 使用 4 个空格缩进
- 函数和类使用文档字符串
- API 函数统一返回 `json_response()` 格式
- 所有数据库操作使用参数化查询（防止 SQL 注入）

### JavaScript 代码

- 使用 ES6+ 语法
- 模块化组织（import/export）
- 使用 async/await 处理异步

### 文件命名

- Python 文件：`snake_case.py`
- JavaScript 文件：`camelCase.js`
- 文档文件：`PascalCase.md`

---

## 🗑️ 已删除的文件

以下文件已被删除（无效用或过时）：

- `check_csv_structure.py` - 临时检查脚本
- `SUPABASE_REMOVAL_IMPACT.md` - 临时文档
- `MIGRATION_SUMMARY.md` - 迁移总结（已过时）
- `docs/移除Supabase说明.md` - 已过时
- `docs/功能影响分析.md` - 已过时
- `docs/下一步操作.md` - 已过时
- `French-Dictionary整合方案.md` - 已整合到 README

---

## 📚 文档结构

- **`README.md`** - 项目主文档
- **`NEXT_STEPS.md`** - 下一步操作指南（当前步骤）
- **`docs/PostgreSQL设置指南.md`** - 数据库设置详细步骤
- **`docs/Railway部署指南.md`** - 完整部署指南
- **`docs/环境变量清单.md`** - 环境变量详细说明
- **`docs/部署方案.md`** - 各种部署方案对比

---

**最后更新**：2024-12-19

